<?xml version="1.0" encoding="utf-8"?>
<Definition GameID="Enderal" SortOrder="13101">
	<Name ShortName="Enderal">Enderal - Forgotten Stories</Name>

	<Variables>
		<!--Required-->
		<Entry ID="ActualGameDir" Source="Registry" Type="FSPath" SaveAsOverride="1">
			<Branch>32</Branch>
			<Root>HKEY_CURRENT_USER</Root>
			<Path>Software\SureAI\Enderal</Path>
			<Name>Installed Path</Name>
			<Type>REG_SZ</Type>
		</Entry>
		<Entry ID="ActualConfigDir">$SHF(DOCUMENTS)\My Games\Enderal</Entry>
		<Entry ID="ActualSavesDir">$(ActualConfigDir)\Saves</Entry>
		
		<Entry ID="GameEditorName">Creation Kit</Entry>
		<Entry ID="ScriptExtenderID">SKSE</Entry>
		<Entry ID="xEditID">enderal</Entry>
	</Variables>

	<Network>
		<NetworkManager>
			<NexusID>Enderal</NexusID>
			<SteamID>933480</SteamID>
		</NetworkManager>
	</Network>

	<Programs>
		<ProgramManager>
			<DefaultPrograms>
				<Entry ShowInMainMenu="1">
					<Name>$(GameShortName) $(ScriptExtenderID)</Name>
					<Executable>SKSE_Loader.exe</Executable>
				</Entry>
				<Entry ShowInMainMenu="1">
					<Name>$(GameShortName) Launcher</Name>
					<Executable>Enderal Launcher.exe</Executable>
				</Entry>
				<Entry>
					<Name>BOSS</Name>
					<Executable>BOSS/BOSS.exe</Executable>
					<Arguments></Arguments>
				</Entry>
				<Entry>
					<Name>Creation Kit</Name>
					<Executable>CreationKit.exe</Executable>
					<Arguments></Arguments>
				</Entry>
				<Entry>
					<Name>ENB Injector</Name>
					<Executable>ENBInjector.exe</Executable>
				</Entry>
			</DefaultPrograms>
		</ProgramManager>
	</Programs>

	<GameConfigModule>
		<ConfigManager>
			<Definitions>
				<Definition ID="Games/Skyrim">
					<Groups>
						<Group ID="Game">
							<Source Type="FSPath">$(ConfigDir)\Enderal.ini</Source>
						</Group>
						<Group ID="GamePrefs">
							<Source Type="FSPath">$(ConfigDir)\EnderalPrefs.ini</Source>
						</Group>
						<Group ID="Editor">
							<Source Type="FSPath">SkyrimEditor.ini</Source>
						</Group>
						<Group ID="EditorPrefs">
							<Source Type="FSPath">SkyrimEditorPrefs.ini</Source>
						</Group>
					</Groups>
				</Definition>
				<Definition ID="ENB">
					<Groups>
						<Group ID="ENBLocal">
							<Source Type="FSPath">ENBLocal.ini</Source>
						</Group>
						<Group ID="ENBSeries">
							<Source Type="FSPath">ENBSeries.ini</Source>
						</Group>
					</Groups>
				</Definition>
			</Definitions>
		</ConfigManager>
	</GameConfigModule>

	<GameMods>
		<ModManager>
			<MirroredLocations>
				<Entry>
					<Sources>
						<Entry>$(SavesDir)</Entry>
						<Entry>$(ConfigDir)</Entry>
					</Sources>
					<Target>$(ActualConfigDir)</Target>
				</Entry>
				<Entry>
					<Sources>
						<Entry>$(ProfileDir)\Plugins</Entry>
					</Sources>
					<Target>$SHF(APPLICATIONDATA_LOCAL)\Enderal</Target>
				</Entry>
			</MirroredLocations>
		</ModManager>
		<TagManager>
			<DefaultTags>
				<Entry ID="Armor">
					<NexusID>111</NexusID>
				</Entry>
				<Entry ID="Weapons">
					<NexusID>112</NexusID>
				</Entry>
				<Entry ID="Magic">
					<NexusID>113</NexusID>
				</Entry>
				<Entry ID="Player Homes">
					<NexusID>107</NexusID>
				</Entry>
				<Entry ID="User Interface">
					<NexusID>109</NexusID>
				</Entry>
				<Entry ID="Cheats">
					<NexusID>108</NexusID>
				</Entry>
				<Entry ID="Fixes">
					<NexusID>110</NexusID>
				</Entry>
				<Entry ID="Utilities">
					<NexusID>114</NexusID>
				</Entry>
			</DefaultTags>
		</TagManager>
	</GameMods>
	
	<GameData>
		<PluginManager Implementation="Bethesda" PluginImplementation="BethesdaSkyrim">
			<Limit Value="254"/>

			<ActiveList>$(ProfileDir)\Plugins\Plugins.txt</ActiveList>
			<OrderList>$(ProfileDir)\Plugins\LoadOrder.txt</OrderList>

			<ChangeFileModificationDate>0</ChangeFileModificationDate>
			<SortByFileModificationDate>0</SortByFileModificationDate>

			<ActiveListHeader><![CDATA[# Last modified by $(AppName) $(AppVersion) at $(CurrentDateTime).]]></ActiveListHeader>
			<OrderListHeader><![CDATA[# This file is used by $(GameShortName) to keep track of your downloaded content.
# Please do not modify this file.
# Last modified by $(AppName) $(AppVersion) at $(CurrentDateTime).]]></OrderListHeader>

			<SortingTools>
				<Entry ID="LOOT" Name="Load Order Optimization Tool (LOOT)">
					<Command><![CDATA[--game=Skyrim]]></Command>
				</Entry>
			</SortingTools>

			<LibLoot>
				<Branch>v0.14</Branch>
				<Repository>https://github.com/loot/skyrim.git</Repository>
				<FolderName>Skyrim</FolderName>
				<LocalGamePath>$(ProfileDir)\Plugins</LocalGamePath>
			</LibLoot>

			<StandardContent MainID="Skyrim.esm">
				<Entry ID="Skyrim.esm" Name="Skyrim" Logo="Skyrim.png"/>
				<Entry ID="Update.esm" Name="Skyrim: Update" Logo="Skyrim.png"/>
				<Entry ID="Dawnguard.esm" Name="Skyrim: Dawnguard" Logo="Dawnguard.png"/>
				<Entry ID="HearthFires.esm" Name="Skyrim: HearthFires" Logo="HearthFires.png"/>
				<Entry ID="Dragonborn.esm" Name="Skyrim: Dragonborn" Logo="Dragonborn.png"/>
				<Entry ID="HighResTexturePack01.esp" Name="Skyrim: High Resolution Texture Pack" Logo="HighResTexturePack.png"/>
				<Entry ID="HighResTexturePack02.esp" Name="Skyrim: High Resolution Texture Pack" Logo="HighResTexturePack.png"/>
				<Entry ID="HighResTexturePack03.esp" Name="Skyrim: High Resolution Texture Pack" Logo="HighResTexturePack.png"/>
				
				<Entry ID="Enderal - Forgotten Stories.esm" Name="$(GameShortName): Forgotten Stories.esm" Logo="Enderal.png"/>
			</StandardContent>
		</PluginManager>

		<SaveManager SaveImplementation="BethesdaSkyrim">
			<Location>$(SavesDir)\Saves</Location>
			<FileFilters>
				<Entry Label="$T(SaveManager.Filter.Saves) (*.ess)">*.ess</Entry>
				<Entry Label="$T(SaveManager.Filter.Backups) (*.bak)">*.bak</Entry>
				<Entry Label="$T(SaveManager.Filter.CoSaves) (*.skse)">*.skse</Entry>
			</FileFilters>

			<PrimaryExtension>ess</PrimaryExtension>
			<SecondaryExtension>skse</SecondaryExtension>
		</SaveManager>

		<ScreenshotsGallery>
			<Locations>
				<Entry>$(ActualGameDir)</Entry>
				<Entry>$(ActualGameDir)\Screenshots</Entry>
				<Entry>$(ConfigDir)</Entry>
				<Entry>$(ConfigDir)\Screenshots</Entry>
				<Entry>$(OverwritesDir)</Entry>
				<Entry>$(OverwritesDir)\Screenshots</Entry>
			</Locations>
		</ScreenshotsGallery>
	</GameData>

	<Packages>
		<PackageManager>
			<Requirements>
				<!-- General -->
				<Entry ID="Enderal" Category="$T(PackageManager.ReqCategory.General)">
					<Name>$(GameName)</Name>
					<Object Function="FileExist">TESV.exe</Object>
					<Version Function="GTEQ">1.9.32.0</Version>
				</Entry>
				<Entry ID="$(ScriptExtenderID)" Category="$T(PackageManager.ReqCategory.General)">
					<Name>$(GameShortName) Script Extender</Name>
					<Object Function="FileExist">SKSE_Loader.exe</Object>
					<Version Function="GTEQ">0.1.7.3</Version>
				</Entry>
				<Entry ID="ScriptDragon" Category="$T(PackageManager.ReqCategory.General)">
					<Name>ScriptDragon</Name>
					<Object Function="FileExist">ScriptDragon.dll</Object>
					<Version Function="GTEQ">0.1.7.3</Version>
				</Entry>

				<!-- DLC -->
				<Entry ID="DLC-DG" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: Dawnguard</Name>
					<Object Function="PluginActive">Dawnguard.esm</Object>
				</Entry>
				<Entry ID="DLC-HF" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: HearthFire</Name>
					<Object Function="PluginActive">HearthFires.esm</Object>
				</Entry>
				<Entry ID="DLC-DB" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: Dragonborn</Name>
					<Object Function="PluginActive">Dragonborn.esm</Object>
				</Entry>
				<Entry ID="DLC-HRTP" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: High Resolution Texture Pack</Name>
					<Dependencies>
						<Entry>DLC-HRTP1</Entry>
						<Entry>DLC-HRTP2</Entry>
						<Entry>DLC-HRTP3</Entry>
					</Dependencies>
				</Entry>
				<Entry ID="DLC-HRTP1" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: High Resolution Texture Pack 1</Name>
					<Object Function="PluginActive">HighResTexturePack01.esp</Object>
				</Entry>
				<Entry ID="DLC-HRTP2" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: High Resolution Texture Pack 2</Name>
					<Object Function="PluginActive">HighResTexturePack02.esp</Object>
				</Entry>
				<Entry ID="DLC-HRTP3" Category="$T(PackageManager.ReqCategory.DLC)">
					<Name>DLC: High Resolution Texture Pack 3</Name>
					<Object Function="PluginActive">HighResTexturePack03.esp</Object>
				</Entry>
			</Requirements>
		</PackageManager>
	</Packages>
</Definition>
